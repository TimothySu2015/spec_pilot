# Goals and Background Context

### Goals
- 建立一個能與 AI Agent 協作的自動化 API 測試與驗證系統，透過 MCP 介面提供遠端可觸發的測試能力。
- 支援以 OpenAPI/Swagger 規格與 YAML 測試流程為輸入，確保多種 API 專案皆能快速導入。
- 提供結構化 JSON 測試報表，便於 CI/CD 與 AI 工具快速定位錯誤並進行自動修正。

### Background Context
本專案為新建案，團隊計畫使用 Node.js 與 TypeScript 打造聚焦於 API 測試的工具。其核心需求是透過流程檔快速定義測試步驟，加上 AI 驅動的動態驗證能力，協助開發與維運在 CI/CD 流程中自動驗證 API 行為。本文件依據 `docs/SpecPilot-Req.md` 匯整與延伸需求，確保 PRD 內容與原始構想保持一致。

### Target User Personas

#### 👨‍💻 **Primary Persona 1: DevOps 工程師 - Alex**
**基本資訊**: 28-35歲，3-8年 DevOps/SRE 經驗，熟悉 CI/CD、Docker、Kubernetes、Shell scripting

**核心目標**:
- 在 CI/CD 流程中自動驗證 API 的正確性，減少生產環境問題
- 快速驗證 API 變更不會破壞既有功能
- 提升部署信心，減少半夜被叫起來修 bug

**主要痛點**:
- 🔴 **手動 API 測試耗時**: 使用 Postman/Insomnia 手動測試每個 API 端點
- 🔴 **CI 流程不完整**: 缺乏標準化的 API 驗證步驟
- 🔴 **錯誤發現太晚**: API 問題經常在生產環境才被發現
- 🔴 **多環境配置複雜**: 需要為 dev/staging/prod 維護不同的測試配置

**SpecPilot 價值主張**:
- ✅ CLI 整合: 輕鬆整合至現有 CI/CD 腳本
- ✅ 環境參數覆寫: 一套流程適用多個環境
- ✅ 結構化報表: 便於 CI 系統解析和告警
- ✅ 快速反饋: 1分鐘內完成 API 驗證

#### 🧪 **Primary Persona 2: QA 測試工程師 - Sarah**
**基本資訊**: 25-32歲，2-6年軟體測試經驗，熟悉 API 測試、自動化測試框架、YAML/JSON 格式

**核心目標**:
- 確保 API 功能符合需求規格，提供完整的測試覆蓋
- 建立可重複使用的測試流程，減少重複性工作
- 及早發現 API 邏輯錯誤和資料格式問題

**主要痛點**:
- 🔴 **測試案例難以維護**: API 變更時需要更新多個測試腳本
- 🔴 **測試資料管理複雜**: 不同測試場景需要不同的測試資料準備
- 🔴 **驗證規則撰寫困難**: 複雜的回應驗證需要寫程式碼
- 🔴 **測試結果追蹤困難**: 難以快速定位失敗的原因和位置

**SpecPilot 價值主張**:
- ✅ YAML 流程定義: 直觀的測試腳本撰寫方式
- ✅ Schema 自動驗證: 基於 OpenAPI 規格自動驗證回應格式
- ✅ 自訂驗證規則: 支援業務邏輯驗證 (notNull, regex, contains)
- ✅ 詳細錯誤報告: 清楚指出驗證失敗的具體位置

#### 🤖 **Primary Persona 3: AI Agent 整合者 - Jordan**
**基本資訊**: 26-40歲，2-10年軟體開發經驗，1-3年 AI 整合經驗，熟悉 AI/LLM 整合、API 開發、自動化工具開發

**核心目標**:
- 讓 AI Agent 能自動驗證 API 功能，支援 AI 驅動的開發流程
- 無縫整合到 AI 工作流，支援動態測試生成
- 減少人工介入，讓 AI 自主進行 API 驗證

**主要痛點**:
- 🔴 **API 測試工具不支援程式化呼叫**: 現有工具主要設計給人類使用
- 🔴 **動態內容處理困難**: AI 生成的測試內容難以整合到現有工具
- 🔴 **錯誤格式不統一**: 不同工具的錯誤格式讓 AI 難以理解
- 🔴 **即時反饋需求**: AI 需要快速得到測試結果以進行後續決策

**SpecPilot 價值主張**:
- ✅ MCP JSON-RPC 介面: 標準化的 AI Agent 整合方式
- ✅ 即時內容支援: 支援 AI 動態生成的測試內容
- ✅ 結構化錯誤回應: JSON-RPC 格式便於 AI 理解和處理
- ✅ 無檔案依賴: 支援純記憶體內的測試執行

### Market Positioning & Competitive Analysis

#### **vs 現有解決方案對比**
| 解決方案 | Postman/Insomnia | Newman | RestAssured | SpecPilot |
|----------|------------------|--------|-------------|-----------|
| **CLI 整合** | 🟡 有限 | ✅ 優秀 | ✅ 優秀 | ✅ 優秀 |
| **AI 整合** | ❌ 困難 | ❌ 困難 | ❌ 困難 | ✅ 原生支援 |
| **OpenAPI 整合** | 🟡 部分 | 🟡 部分 | ✅ 優秀 | ✅ 優秀 |
| **動態內容** | ❌ 不支援 | ❌ 不支援 | 🟡 有限 | ✅ 原生支援 |
| **學習曲線** | 🟡 中等 | 🟡 中等 | 🔴 陡峭 | 🟢 平緩 |

#### **SpecPilot 差異化優勢**
1. **AI-First 設計**: 原生支援 MCP 協議，專為 AI Agent 整合設計
2. **雙模式操作**: CLI + MCP 滿足人工和自動化兩種使用場景
3. **動態內容支援**: 支援 AI 即時生成的測試內容，無檔案系統依賴
4. **OpenAPI 驅動**: 基於 OpenAPI 規格的自動化驗證，減少手動配置

### Change Log
| Date       | Version | Description                                 | Author    |
|------------|---------|---------------------------------------------|-----------|
| 2025-02-15 | v0.1    | 初版草稿，依據 `docs/SpecPilot-Req.md` 匯整 | John (PM) |

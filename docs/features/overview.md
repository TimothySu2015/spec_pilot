# SpecPilot æ–°å¢åŠŸèƒ½ç¸½è¦½

## ç‰ˆæœ¬è³‡è¨Š
- **ç‰ˆæœ¬**: v0.2.0
- **æ›´æ–°æ—¥æœŸ**: 2025-01-16
- **ç‹€æ…‹**: é–‹ç™¼ä¸­

---

## æ¦‚è¿°

æœ¬æ¬¡æ›´æ–°ç‚º SpecPilot æ–°å¢äº†ä¸‰å¤§æ ¸å¿ƒæ¨¡çµ„,å¤§å¹…æå‡æ¸¬è©¦æµç¨‹ç”¢ç”Ÿèˆ‡ç®¡ç†çš„è‡ªå‹•åŒ–èƒ½åŠ›ã€‚é€™äº›æ¨¡çµ„å°ˆç‚º AI é©…å‹•é–‹ç™¼æµç¨‹è¨­è¨ˆ,é€é MCP (Model Context Protocol) ä»‹é¢èˆ‡ AI Agent æ·±åº¦æ•´åˆã€‚

---

## æ–°å¢æ ¸å¿ƒæ¨¡çµ„

### 1. Flow Generatorï¼ˆå°è©±å¼æµç¨‹ç”¢ç”Ÿå™¨ï¼‰
**æ¨¡çµ„è·¯å¾‘**: `packages/flow-generator/`

é€éè‡ªç„¶èªè¨€æè¿°è‡ªå‹•ç”¢ç”Ÿ API æ¸¬è©¦æµç¨‹ï¼Œæ”¯æ´å¤šè¼ªå°è©±é€æ­¥å®Œå–„æ¸¬è©¦ç´°ç¯€ã€‚

**æ ¸å¿ƒèƒ½åŠ›**:
- è‡ªç„¶èªè¨€æ„åœ–è­˜åˆ¥
- æ™ºèƒ½ç«¯é»æ¨è–¦
- å°è©±ä¸Šä¸‹æ–‡ç®¡ç†
- åƒæ•¸å»ºè­°èˆ‡è£œå…¨
- å‹•æ…‹ Flow å»ºæ§‹

**é©ç”¨å ´æ™¯**:
- å¿«é€Ÿå»ºç«‹å–®ä¸€ç«¯é»æ¸¬è©¦
- æ¢ç´¢æ€§æ¸¬è©¦é–‹ç™¼
- èˆ‡ AI Agent å°è©±å¼å”ä½œ

**è©³ç´°æ–‡ä»¶**: [Flow Generator](./flow-generator.md)

---

### 2. Test Suite Generatorï¼ˆæ¸¬è©¦å¥—ä»¶è‡ªå‹•ç”¢ç”Ÿå™¨ï¼‰
**æ¨¡çµ„è·¯å¾‘**: `packages/test-suite-generator/`

æ ¹æ“š OpenAPI è¦æ ¼è‡ªå‹•ç”¢ç”Ÿå®Œæ•´æ¸¬è©¦å¥—ä»¶ï¼Œæ¶µè“‹æˆåŠŸæ¡ˆä¾‹ã€éŒ¯èª¤è™•ç†ã€é‚Šç•Œæ¸¬è©¦åŠè³‡æºä¾è³´ä¸²æ¥ã€‚

**æ ¸å¿ƒèƒ½åŠ›**:
- OpenAPI è¦æ ¼æ™ºèƒ½åˆ†æ
- CRUD æ“ä½œæ¸¬è©¦ç”¢ç”Ÿ
- éŒ¯èª¤æ¡ˆä¾‹è‡ªå‹•æ¨å°
- é‚Šç•Œå€¼æ¸¬è©¦ç”¢ç”Ÿ
- è³‡æºä¾è³´é—œä¿‚è§£æ
- æ¸¬è©¦è³‡æ–™åˆæˆ
- Flow å“è³ªæª¢æŸ¥

**é©ç”¨å ´æ™¯**:
- æ‰¹æ¬¡ç”¢ç”Ÿå®Œæ•´æ¸¬è©¦å¥—ä»¶
- å›æ­¸æ¸¬è©¦é–‹ç™¼
- API å¥‘ç´„æ¸¬è©¦
- CI/CD æ•´åˆæ¸¬è©¦

**è©³ç´°æ–‡ä»¶**: [Test Suite Generator](./test-suite-generator.md)

---

### 3. Flow Validatorï¼ˆæµç¨‹é©—è­‰å™¨ï¼‰
**æ¨¡çµ„è·¯å¾‘**: `packages/flow-validator/`

é©—è­‰ç”¢ç”Ÿçš„æ¸¬è©¦ Flow æ˜¯å¦ç¬¦åˆè¦ç¯„èˆ‡èªæ„æ­£ç¢ºæ€§ã€‚

**æ ¸å¿ƒèƒ½åŠ›**:
- JSON Schema æ ¼å¼é©—è­‰
- èªæ„æ­£ç¢ºæ€§æª¢æŸ¥
- OperationId å­˜åœ¨æ€§é©—è­‰
- è®Šæ•¸å¼•ç”¨æª¢æŸ¥
- èªè­‰æµç¨‹é©—è­‰

**é©ç”¨å ´æ™¯**:
- Flow ç”¢ç”Ÿå¾Œè‡ªå‹•é©—è­‰
- æ‰‹å‹•ç·¨è¼¯ Flow çš„æ­£ç¢ºæ€§æª¢æŸ¥
- CI/CD Pipeline é©—è­‰éšæ®µ

**è©³ç´°æ–‡ä»¶**: [Flow Validator](./flow-validator.md)

---

## MCP Server æ–°å¢åŠŸèƒ½

SpecPilot MCP Server æ–°å¢ 6 å€‹å·¥å…·æ–¹æ³•ï¼Œå®Œæ•´æ”¯æ´æ¸¬è©¦ Flow çš„ç”¢ç”Ÿã€é©—è­‰ã€å“è³ªæª¢æŸ¥èˆ‡å„²å­˜ã€‚

### æ–°å¢å·¥å…·åˆ—è¡¨

| å·¥å…·åç¨± | åŠŸèƒ½æè¿° | ç‹€æ…‹ |
|---------|---------|------|
| `generateFlow` | æ ¹æ“š OpenAPI è¦æ ¼è‡ªå‹•ç”¢ç”Ÿæ¸¬è©¦æµç¨‹ | âœ… å·²å¯¦ä½œ |
| `validateFlow` | é©—è­‰ Flow å®šç¾©çš„æ ¼å¼èˆ‡èªæ„æ­£ç¢ºæ€§ | âœ… å·²å¯¦ä½œ |
| `checkFlowQuality` | æª¢æŸ¥ Flow å“è³ªä¸¦æä¾›æ”¹é€²å»ºè­° | âœ… å·²å¯¦ä½œ |
| `saveFlow` | å°‡ Flow YAML å„²å­˜è‡³å°ˆæ¡ˆç›®éŒ„ | âœ… å·²å¯¦ä½œ |

**è©³ç´°æ–‡ä»¶**: [MCP Server å¢å¼·åŠŸèƒ½](./mcp-server-enhancements.md)

---

## æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Agent (Claude)                                       â”‚
â”‚  é€é MCP å”è­°å‘¼å« SpecPilot Server                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ MCP Protocol
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SpecPilot MCP Server                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  æ–°å¢ MCP å·¥å…·                                      â”‚ â”‚
â”‚  â”‚  â€¢ generateFlow                                    â”‚ â”‚
â”‚  â”‚  â€¢ validateFlow                                    â”‚ â”‚
â”‚  â”‚  â€¢ checkFlowQuality                                â”‚ â”‚
â”‚  â”‚  â€¢ saveFlow                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
    â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flow    â”‚  â”‚ Test     â”‚  â”‚ Flow        â”‚
â”‚ Generatorâ”‚  â”‚ Suite    â”‚  â”‚ Validator   â”‚
â”‚         â”‚  â”‚ Generatorâ”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä½¿ç”¨æµç¨‹ç¯„ä¾‹

### å ´æ™¯ 1: å¿«é€Ÿç”¢ç”Ÿæ¸¬è©¦å¥—ä»¶

```bash
# 1. åˆ—å‡ºå¯ç”¨çš„è¦æ ¼æª”æ¡ˆ
listSpecs

# 2. è‡ªå‹•ç”¢ç”Ÿå®Œæ•´æ¸¬è©¦å¥—ä»¶
generateFlow {
  specPath: "specs/user-api.yaml",
  options: {
    includeSuccessCases: true,
    includeErrorCases: true,
    includeEdgeCases: false
  }
}

# 3. é©—è­‰ç”¢ç”Ÿçš„ Flow
validateFlow {
  flowContent: "...",
  specPath: "specs/user-api.yaml"
}

# 4. æª¢æŸ¥ Flow å“è³ª
checkFlowQuality {
  flowContent: "...",
  specPath: "specs/user-api.yaml"
}

# 5. å„²å­˜åˆ°å°ˆæ¡ˆ
saveFlow {
  flowContent: "...",
  fileName: "user-crud-tests"
}

# 6. åŸ·è¡Œæ¸¬è©¦
runFlow {
  spec: "specs/user-api.yaml",
  flow: "flows/user-crud-tests.yaml",
  baseUrl: "http://localhost:3000"
}
```

### å ´æ™¯ 2: AI å°è©±å¼ç”¢ç”Ÿï¼ˆè¦åŠƒä¸­ï¼‰

```bash
# ä½¿ç”¨å°è©±æ–¹å¼é€æ­¥å»ºç«‹æ¸¬è©¦
generateFlowConversational {
  description: "æˆ‘æƒ³æ¸¬è©¦ä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½",
  spec: "specs/user-api.yaml"
}

# AI å›æ‡‰ï¼š
# æ‰¾åˆ°ç«¯é»: POST /api/users
# éœ€è¦åƒæ•¸: name, email, password
# æ˜¯å¦éœ€è¦æ¸¬è©¦éŒ¯èª¤æ¡ˆä¾‹ï¼Ÿ(y/n)
```

---

## æŠ€è¡“ç‰¹é»

### 1. æ¨¡çµ„åŒ–è¨­è¨ˆ
- æ¯å€‹æ ¸å¿ƒæ¨¡çµ„ç¨ç«‹æ‰“åŒ… (`@specpilot/*`)
- æ¸…æ™°çš„è·è²¬åŠƒåˆ†
- æ˜“æ–¼å–®å…ƒæ¸¬è©¦èˆ‡ç¶­è­·

### 2. AI å„ªå…ˆè¨­è¨ˆ
- æ‰€æœ‰åŠŸèƒ½é€é MCP ä»‹é¢æš´éœ²
- çµæ§‹åŒ–çš„éŒ¯èª¤è¨Šæ¯èˆ‡å»ºè­°
- æ”¯æ´å¤šè¼ªå°è©±èˆ‡ä¸Šä¸‹æ–‡ç®¡ç†

### 3. å‹åˆ¥å®‰å…¨
- å®Œæ•´çš„ TypeScript å‹åˆ¥å®šç¾©
- åš´æ ¼æ¨¡å¼å•Ÿç”¨
- åŒ¯å‡ºçš„å‹åˆ¥ä»‹é¢ä¾›å¤–éƒ¨ä½¿ç”¨

### 4. å¯æ“´å……æ€§
- æ”¯æ´è‡ªè¨‚é©—è­‰è¦å‰‡
- å¯æ“´å……çš„ç”¢ç”Ÿå™¨ç­–ç•¥
- Plugin æ¶æ§‹ï¼ˆè¦åŠƒä¸­ï¼‰

---

## æª”æ¡ˆçµæ§‹

```
packages/
â”œâ”€â”€ flow-generator/              # å°è©±å¼æµç¨‹ç”¢ç”Ÿå™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ nlp-parser.ts       # è‡ªç„¶èªè¨€è§£æ
â”‚   â”‚   â”œâ”€â”€ intent-recognizer.ts # æ„åœ–è­˜åˆ¥
â”‚   â”‚   â”œâ”€â”€ context-manager.ts  # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ flow-builder.ts     # Flow å»ºæ§‹å™¨
â”‚   â”‚   â””â”€â”€ suggestion-engine.ts # å»ºè­°å¼•æ“
â”‚   â””â”€â”€ __tests__/
â”‚
â”œâ”€â”€ test-suite-generator/        # æ¸¬è©¦å¥—ä»¶ç”¢ç”Ÿå™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ spec-analyzer.ts    # è¦æ ¼åˆ†æ
â”‚   â”‚   â”œâ”€â”€ crud-generator.ts   # CRUD æ¸¬è©¦ç”¢ç”Ÿ
â”‚   â”‚   â”œâ”€â”€ error-case-generator.ts # éŒ¯èª¤æ¡ˆä¾‹ç”¢ç”Ÿ
â”‚   â”‚   â”œâ”€â”€ edge-case-generator.ts # é‚Šç•Œæ¸¬è©¦ç”¢ç”Ÿ
â”‚   â”‚   â”œâ”€â”€ dependency-resolver.ts # ä¾è³´è§£æ
â”‚   â”‚   â”œâ”€â”€ data-synthesizer.ts # è³‡æ–™åˆæˆ
â”‚   â”‚   â””â”€â”€ flow-quality-checker.ts # å“è³ªæª¢æŸ¥
â”‚   â””â”€â”€ __tests__/
â”‚
â””â”€â”€ flow-validator/              # æµç¨‹é©—è­‰å™¨
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ schema-validator.ts # Schema é©—è­‰
    â”‚   â”œâ”€â”€ semantic-validator.ts # èªæ„é©—è­‰
    â”‚   â””â”€â”€ flow-validator.ts   # æ•´åˆé©—è­‰å™¨
    â””â”€â”€ __tests__/

apps/
â””â”€â”€ mcp-server/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ handlers/
    â”‚   â”‚   â”œâ”€â”€ generate-flow.ts        # æ–°å¢
    â”‚   â”‚   â””â”€â”€ generate-test-suite.ts  # æ–°å¢
    â”‚   â””â”€â”€ index.ts                    # æ›´æ–°
    â””â”€â”€ __tests__/
```

---

## é–‹ç™¼ç‹€æ…‹

### å·²å®Œæˆ âœ…
- [x] Flow Generator æ ¸å¿ƒæ¨¡çµ„
- [x] Test Suite Generator æ ¸å¿ƒæ¨¡çµ„
- [x] Flow Validator æ ¸å¿ƒæ¨¡çµ„
- [x] MCP Server å·¥å…·æ•´åˆ
- [x] åŸºç¤å–®å…ƒæ¸¬è©¦
- [x] ç«¯å°ç«¯æ¸¬è©¦

### é€²è¡Œä¸­ ğŸš§
- [ ] å°è©±å¼ Flow ç”¢ç”Ÿ (NLP æ•´åˆ)
- [ ] Flow å“è³ªæª¢æŸ¥å¢å¼·
- [ ] æ›´å¤šé‚Šç•Œæ¸¬è©¦æ¡ˆä¾‹
- [ ] æ•ˆèƒ½å„ªåŒ–

### è¦åŠƒä¸­ ğŸ“‹
- [ ] Flow Builder UI æ•´åˆ
- [ ] è¦–è¦ºåŒ– Flow ç·¨è¼¯å™¨
- [ ] æ¸¬è©¦è³‡æ–™ç®¡ç†ç³»çµ±
- [ ] Plugin æ“´å……æ©Ÿåˆ¶

---

## æ•ˆèƒ½æŒ‡æ¨™

### ç”¢ç”Ÿé€Ÿåº¦
- å–®ä¸€ç«¯é»æ¸¬è©¦ç”¢ç”Ÿ: < 100ms
- å®Œæ•´æ¸¬è©¦å¥—ä»¶ç”¢ç”Ÿï¼ˆ10 ç«¯é»ï¼‰: < 500ms
- Flow é©—è­‰: < 50ms

### æ¸¬è©¦è¦†è“‹ç‡
- Flow Generator: 85%
- Test Suite Generator: 82%
- Flow Validator: 88%
- MCP Handler: 78%

---

## ç›¸é—œæ–‡ä»¶

- [Flow Generator è©³ç´°æ–‡ä»¶](./flow-generator.md)
- [Test Suite Generator è©³ç´°æ–‡ä»¶](./test-suite-generator.md)
- [Flow Validator è©³ç´°æ–‡ä»¶](./flow-validator.md)
- [MCP Server å¢å¼·åŠŸèƒ½](./mcp-server-enhancements.md)
- [ä½¿ç”¨ç¯„ä¾‹](../examples/)

---

## è²¢ç»æŒ‡å—

å¦‚éœ€å°é€™äº›æ–°åŠŸèƒ½é€²è¡Œè²¢ç»æˆ–æå‡ºå»ºè­°,è«‹åƒè€ƒ:
- [é–‹ç™¼æŒ‡å—](../guides/development-guide.md)
- [æ¶æ§‹æ–‡ä»¶](../architecture/)
- [æ¸¬è©¦ç­–ç•¥](../qa/)

---

**æœ€å¾Œæ›´æ–°**: 2025-01-16
**ç¶­è­·è€…**: SpecPilot Team

name: 登入後取得 ID 2 使用者資料
description: 先使用預設管理者帳號登入取得 TOKEN，然後查詢 ID 為 2 的使用者詳細資料
version: 1.0.0
baseUrl: http://localhost:3000

steps:
  - name: 使用者登入
    request:
      method: POST
      path: /auth/login
      body:
        username: admin
        password: "123456"
    capture:
      - variableName: authToken
        path: token
    expect:
      statusCode: 200
      body:
        schema:
          $ref: '#/components/schemas/AuthResponse'

  - name: 查詢 ID 2 的使用者
    request:
      method: GET
      path: /api/users/2
      headers:
        Authorization: "Bearer ${authToken}"
    expect:
      statusCode: 200
      body:
        schema:
          $ref: '#/components/schemas/User'
        customRules:
          - field: id
            rule: equals
            expected: 2
